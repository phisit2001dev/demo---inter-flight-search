<mat-card class="mt-3" [ngClass]="{'d-none': !dataSource?.totalResult }">
  <div class="row">
    <div class="d-flex justify-content-between flex-column flex-lg-row">
      <div class="d-flex align-items-center">
        <span class="table_title_search">{{ "table_title_search" | translate: { value: dataSource?.totalResult } }}</span>
        <button mat-button class="button-icon-action" (click)="export()" [disabled]="!permission.export">
          <mat-icon color="primary">output</mat-icon>
          <span>Export</span>
        </button>
      </div>
      <div class="d-flex align-items-center">
        <span class="me-3">{{ "gotoPage" | translate}}</span>
        <mat-form-field
          [appearance]="'outline'">
          <input
            matInput
            [value]="displayPageIndex"
            inputPaginator
            (valueChange)="pageChange($event)"
          />
        </mat-form-field>
        <mat-paginator #paginatorHearder
          (page)="pageChange($event)"
          [pageSize]="pageSize"
          [length]="dataLength"
          [pageIndex]="pageIndex">
        </mat-paginator>
      </div>
    </div>
  </div>
  <div class="overflow-auto">
    <table mat-table [dataSource]="dataSource?.listResult" class="mat-elevation-z sit-table w-100" style="min-width: 1000px;"
      matSort
      [sitSortActive]="headerSorts"
      (matSortChange)="sortChange.emit($event)"
    >
    <!-- Position Column -->
      <ng-container matColumnDef="position">
        <th mat-header-cell *matHeaderCellDef style="text-align: center;" class="col-no">{{ 'No.' | translate }}</th>
        <td mat-cell *matCellDef="let element;let index = index" style="text-align: center;" class="col-no">
          {{index | generateRowNo : pageSize : pageIndex }}
        </td>
      </ng-container>

      <!-- checkbox Column -->
      <ng-container matColumnDef="checkbox">
        <th mat-header-cell *matHeaderCellDef style="text-align: center;" class="col-checkbox">
          <mat-checkbox
            (change)="$event ? masterToggle() : null"
            [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let element;" style="text-align: center;" class="col-checkbox">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="$event ? childToggle(element) : null"
            [checked]="selection.isSelected(element)">
          </mat-checkbox>
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef class="text-center col-icon">{{ "edit" | translate }}</th>
        <td mat-cell *matCellDef="let element" style="text-align: center;" class="col-icon">
          <app-sit-button-icon
            [type]="'EDIT'"
            [permission]="permission.edit"
            [tooltip]="'edit' | translate"
            (btnClick)="clickEdit.emit(element.hiddenToken)"
          ></app-sit-button-icon>
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="view">
        <th mat-header-cell *matHeaderCellDef class="text-center col-icon">{{ "view" | translate }}</th>
        <td mat-cell *matCellDef="let element" style="text-align: center;" class="col-icon">
          <app-sit-button-icon
            [type]="'VIEW'"
            [permission]="permission.edit"
            [tooltip]="'view' | translate"
            (btnClick)="clickView.emit(element.hiddenToken)"
          ></app-sit-button-icon>
        </td>
      </ng-container>

      <!-- active Column -->
      <ng-container matColumnDef="active">
        <th mat-header-cell *matHeaderCellDef class="col-active-status text-center">{{ "status"| translate }}</th>
        <td mat-cell *matCellDef="let element;" style="text-align: center;" class="col-active-status">
          <div [class]="element.status | activeStatusPipe">{{element.status}}</div>
        </td>
      </ng-container>

      <!-- iata Column -->
      <ng-container matColumnDef="iata">
        <th mat-header-cell *matHeaderCellDef class="text-start" mat-sort-header="0">{{ 'Airport code (IATA)' | translate }}</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.iata}} </td>
      </ng-container>

      <!-- icao Column -->
      <ng-container matColumnDef="icao">
        <th mat-header-cell *matHeaderCellDef class="text-start" mat-sort-header="1">{{ 'Airport code (ICAO)' | translate }} </th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.icao}} </td>
      </ng-container>

      <!-- airportname Column -->
      <ng-container matColumnDef="airportname">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="2" class="text-start" >{{ 'ex.airname' | translate }}</th>
        <td mat-cell *matCellDef="let element"> {{element.airlineName}} </td>
      </ng-container>

      <!-- location Column -->
      <ng-container matColumnDef="location">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="3">{{ 'ex.locat' | translate }}</th>
        <td mat-cell *matCellDef="let element"> {{element.location}} </td>
      </ng-container>

      <!-- timezone Column -->
      <ng-container matColumnDef="timezone">
        <th mat-header-cell *matHeaderCellDef >{{ 'ex.time' | translate }}</th>
        <td mat-cell *matCellDef="let element"> {{element.Timezone}} </td>
      </ng-container>

      <!-- utc Column -->
      <ng-container matColumnDef="utc">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="4" >{{ 'ex.utc' | translate }}</th>
        <td mat-cell *matCellDef="let element" class="text-center"> {{element.UTC}} </td>
      </ng-container>

      <!-- Countryname Column -->
      <ng-container matColumnDef="Countryname">
        <th mat-header-cell *matHeaderCellDef >{{ 'ex.countryname' | translate }}</th>
        <td mat-cell *matCellDef="let element"> {{element.CountryName}} </td>
      </ng-container>

      <!-- airportsta Column -->
      <ng-container matColumnDef="airportsta">
        <th mat-header-cell *matHeaderCellDef >{{ 'ex.airportsta' | translate }}</th>
        <td mat-cell *matCellDef="let element"> {{element.AirportStatus}} </td>
      </ng-container>
      <!--  -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
  </div>
  <div class="row">
    <div class="d-flex justify-content-between flex-column flex-lg-row">
      <div class="d-flex align-items-center">
        <button mat-stroked-button class="button-active" [disabled]="!permission.active" (click)="setActive(true)">
          <span>{{ 'active' | translate }}</span>
        </button>
        <button mat-stroked-button class="ms-3 button-inactive" [disabled]="!permission.active" (click)="setActive(false)">
          <span>{{ 'inactive' | translate }}</span>
        </button>
      </div>
      <div class="d-flex align-items-center">
        <span class="me-3">{{ "gotoPage" | translate}}</span>
        <mat-form-field
          [appearance]="'outline'">
          <input
            matInput
            [value]="displayPageIndex"
            inputPaginator
            (valueChange)="pageChange($event)"
          />
        </mat-form-field>
        <mat-paginator #paginatorHearder
          (page)="pageChange($event)"
          [pageSize]="pageSize"
          [length]="dataLength"
          [pageIndex]="pageIndex">
        </mat-paginator>
      </div>
    </div>
  </div>
</mat-card>

<!-- code test view -->
{{displayPageIndex | json}}
