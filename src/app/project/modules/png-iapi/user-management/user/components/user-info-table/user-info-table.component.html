<mat-card class="mt-3" [ngClass]="{'d-none': !dataSource?.totalResult }">
    <div class="row">
        <div class="d-flex justify-content-between flex-column flex-lg-row">
            <div class="d-flex align-items-center">
                <span class="table_title_search">{{ "table_title_search" | translate: { value: dataSource?.totalResult | number} }}</span>
                <button mat-button class="button-icon-action" (click)="this.btnExport()" [disabled]="!permission.search">
                    <mat-icon color="primary">output</mat-icon>
                    <span>{{ "export" | translate}}</span>
                </button>
            </div>
            <div class="d-flex align-items-center">
                <span class="me-3">{{ "gotoPage" | translate}}</span>
                <mat-form-field [appearance]="'outline'">
                <input
                    matInput
                    [value]="displayPageIndex"
                    inputPaginator
                    (valueChange)="pageChange($event)" />
                </mat-form-field>
                <mat-paginator #paginatorHearder
                (page)="pageChange($event)"
                [pageSize]="pageSize"
                [length]="dataLength"
                [pageIndex]="pageIndex">
                </mat-paginator>
            </div>
        </div>
    </div>
    <div class="overflow-auto">
        <table mat-table [dataSource]="dataSource?.listResult" class="mat-elevation-z sit-table w-100" style="min-width: 1500px;"
            matSort
            (matSortChange)="sortChange.emit($event)"
            [matSortActive]="headerSorts | initMatsort: 'columnName'"
            [matSortDirection]="headerSorts | initMatsort: 'order'"
        >

            <ng-container matColumnDef="no">
                <th mat-header-cell *matHeaderCellDef class="col-no text-center">{{ 'no' | translate }}</th>
                <td mat-cell *matCellDef="let element;let index = index" class="col-no text-center">
                    {{ index | generateRowNo : pageSize : pageIndex }}
                </td>
            </ng-container>
            
            <!-- checkbox Column -->
            <ng-container matColumnDef="checkbox">
                <th mat-header-cell *matHeaderCellDef class="col-checkbox text-center">
                    <mat-checkbox
                        (change)="$event ? masterToggle() : null"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()">
                    </mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let element;" class="col-checkbox text-center">
                    <mat-checkbox
                        (click)="$event.stopPropagation()"
                        (change)="$event ? childToggle(element) : null"
                        [checked]="selection.isSelected(element)">
                    </mat-checkbox>
                </td>
            </ng-container>

            <ng-container matColumnDef="edit">
                <th mat-header-cell *matHeaderCellDef class="col-icon text-center">{{ "edit" | translate }}</th>
                <td mat-cell *matCellDef="let element" class="col-icon text-center">
                  <app-sit-button-icon
                    [type]="'EDIT'"
                    [permission]="permission.edit"
                    [tooltip]="'edit' | translate"
                    (btnClick)="this.btnGotoEdit(element)"
                  ></app-sit-button-icon>
                </td>
            </ng-container>

            <ng-container matColumnDef="view">
                <th mat-header-cell *matHeaderCellDef class="col-icon text-center">{{ "view" | translate }}</th>
                <td mat-cell *matCellDef="let element" class="col-icon text-center">
                  <app-sit-button-icon
                    [type]="'VIEW'"
                    [permission]="permission.view"
                    [tooltip]="'view' | translate"
                    (btnClick)="this.btnGotoView(element)"
                  ></app-sit-button-icon>
                </td>
            </ng-container>

            <ng-container matColumnDef="active">
                <th mat-header-cell *matHeaderCellDef class="col-active-status text-center">{{"sec.activation_status" | translate}}</th>
                <td mat-cell *matCellDef="let element;" class="col-active-status text-center">
                  <div [class]="element.active | activeStatusPipe">{{element.active}}</div>
                </td>
            </ng-container>
            
            <ng-container matColumnDef="lockStatus">
                <th mat-header-cell *matHeaderCellDef class="col-active-status text-center">{{"sec.password_status" | translate}}</th>
                <td mat-cell *matCellDef="let element" class="col-active-status text-center">
                    <div [class]="element.lockStatus | lockStatusPipe">{{element.lockStatus}}</div>
                </td>
            </ng-container>
        
            <ng-container matColumnDef="employeeCode">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="0" class="text-left employee-code">{{ 'sec.employee_code' | translate }}</th>
                <td mat-cell *matCellDef="let element" class="text-left employee-code"> {{element.employeeCode}} </td>
            </ng-container>
            
            <ng-container matColumnDef="username">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="1" class="text-left username">{{ 'sec.username' | translate }}</th>
                <td mat-cell *matCellDef="let element" class="text-left username"> {{element.username}} </td>
            </ng-container>
        
            <ng-container matColumnDef="fullname">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="2" class="text-left fullname">{{ 'sec.fullname' | translate }}&nbsp;{{"sec.english" | translate}}</th>
                <td mat-cell *matCellDef="let element" class="text-left fullname"> {{element.fullname}} </td>
            </ng-container>

            <ng-container matColumnDef="organizationName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="3" class="text-left organization-name">{{ 'sec.organization' | translate }}</th>
                <td mat-cell *matCellDef="let element" class="text-left organization"> {{element.organizationName}} </td>
            </ng-container>
        
            <ng-container matColumnDef="doctypeRefUserNo">
                <th mat-header-cell *matHeaderCellDef class="doctype-ref-user-no">{{ 'sec.reference_document_no' | translate }}</th>
                <td mat-cell *matCellDef="let element" class="doctype-ref-user-no"> {{element.doctypeRefUserNo}} </td>
            </ng-container>

            <ng-container matColumnDef="phoneNo">
                <th mat-header-cell *matHeaderCellDef class="phone-no">{{ 'sec.phone_no' | translate }}</th>
                <td mat-cell *matCellDef="let element" class="phone-no"> {{element.phoneNo}} </td>
            </ng-container>

            <ng-container matColumnDef="groupNameUser">
                <th mat-header-cell *matHeaderCellDef class="group-name-user">{{ 'sec.user_group' | translate }}</th>
                <td mat-cell *matCellDef="let element" class="group-name-user"><span  #tooltip="matTooltip" matTooltip=" {{ element.groupNameHint }} "> {{element.groupNameUser}}</span></td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            
        </table>
    </div>
    <div class="row">
        <div class="d-flex justify-content-between flex-column flex-lg-row">
            <div class="d-flex align-items-center">
                <button mat-stroked-button class="button-active" [disabled]="!permission.edit" (click)="this.btnUpdateActive()">
                    <span>{{ 'active' | translate }}</span>
                </button>
                <button mat-stroked-button class="ms-3 button-inactive" [disabled]="!permission.edit" (click)="this.btnUpdateInactive()">
                    <span>{{ 'inactive' | translate }}</span>
                </button>
                <button mat-stroked-button class="ms-3 button-active" [disabled]="!permission.changePasswordStatus" (click)="this.btnUpdateReady()">
                    <span>{{ 'sec.ready' | translate }}</span>
                </button>
                <button mat-stroked-button class="ms-3 button-inactive" [disabled]="!permission.changePasswordStatus" (click)="this.btnUpdateLocked()">
                    <span>{{ 'sec.lock' | translate }}</span>
                </button>
            </div>
            <div class="d-flex align-items-center">
                <span class="me-3">{{ "gotoPage" | translate}}</span>
                <mat-form-field
                [appearance]="'outline'">
                <input
                    matInput
                    [value]="displayPageIndex"
                    inputPaginator
                    (valueChange)="pageChange($event)"
                />
                </mat-form-field>
                <mat-paginator #paginatorHearder
                (page)="pageChange($event)"
                [pageSize]="pageSize"
                [length]="dataLength"
                [pageIndex]="pageIndex">
                </mat-paginator>
            </div>
        </div>
    </div>
</mat-card>